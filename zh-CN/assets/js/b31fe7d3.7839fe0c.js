"use strict";(self.webpackChunkadguard_knowledge_base=self.webpackChunkadguard_knowledge_base||[]).push([[3557],{3905:(e,t,r)=>{r.d(t,{Zo:()=>s,kt:()=>m});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var u=n.createContext({}),d=function(e){var t=n.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},s=function(e){var t=d(e.components);return n.createElement(u.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,u=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=d(r),m=a,f=p["".concat(u,".").concat(m)]||p[m]||c[m]||o;return r?n.createElement(f,i(i({ref:t},s),{},{components:r})):n.createElement(f,i({ref:t},s))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=p;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var d=2;d<o;d++)i[d]=r[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}p.displayName="MDXCreateElement"},4024:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>u,default:()=>m,frontMatter:()=>l,metadata:()=>d,toc:()=>c});r(7294);var n=r(3905);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const l={title:"iCloud \u4e13\u7528\u4ee3\u7406\u548c AdGuard",sidebar_position:7},u=void 0,d={unversionedId:"adguard-for-mac/solving-problems/icloud-private-relay",id:"adguard-for-mac/solving-problems/icloud-private-relay",title:"iCloud \u4e13\u7528\u4ee3\u7406\u548c AdGuard",description:"\u672c\u6587\u4ecb\u7ecd Mac \u7248 AdGuard\u3002\u8fd9\u662f\u4e00\u6b3e\u591a\u529f\u80fd\u5e7f\u544a\u62e6\u622a\u7a0b\u5e8f\uff0c\u53ef\u5728\u7cfb\u7edf\u7ea7\u522b\u4fdd\u62a4\u8bbe\u5907\u3002 \u8981\u4e86\u89e3\u5176\u5de5\u4f5c\u539f\u7406\uff0c \u8bf7\u4e0b\u8f7d AdGuard \u5e94\u7528\u7a0b\u5e8f\u3002",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/adguard-for-mac/solving-problems/icloud-private-relay.md",sourceDirName:"adguard-for-mac/solving-problems",slug:"/adguard-for-mac/solving-problems/icloud-private-relay",permalink:"/KnowledgeBase/zh-CN/adguard-for-mac/solving-problems/icloud-private-relay",draft:!1,editUrl:"https://github.com/AdguardTeam/KnowledgeBase/edit/master/docs/adguard-for-mac/solving-problems/icloud-private-relay.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{title:"iCloud \u4e13\u7528\u4ee3\u7406\u548c AdGuard",sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Launch issues on macOS",permalink:"/KnowledgeBase/zh-CN/adguard-for-mac/solving-problems/launch-issues"},next:{title:"Protect Mail Activity and AdGuard",permalink:"/KnowledgeBase/zh-CN/adguard-for-mac/solving-problems/protect-mail-activity"}},s={},c=[{value:"\u95ee\u9898\u63cf\u8ff0",id:"\u95ee\u9898\u63cf\u8ff0",level:2},{value:"\u66f4\u8be6\u7ec6\u7684\u8bf4\u660e",id:"\u66f4\u8be6\u7ec6\u7684\u8bf4\u660e",level:2},{value:"Recommended solution",id:"recommended-solution",level:2},{value:"Alternative solution",id:"alternative-solution",level:2}],p={toc:c};function m(e){var{components:t}=e,r=i(e,["components"]);return(0,n.kt)("wrapper",o(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){a(e,t,r[t])}))}return e}({},p,r),{components:t,mdxType:"MDXLayout"}),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"\u672c\u6587\u4ecb\u7ecd Mac \u7248 AdGuard\u3002\u8fd9\u662f\u4e00\u6b3e\u591a\u529f\u80fd\u5e7f\u544a\u62e6\u622a\u7a0b\u5e8f\uff0c\u53ef\u5728\u7cfb\u7edf\u7ea7\u522b\u4fdd\u62a4\u8bbe\u5907\u3002 \u8981\u4e86\u89e3\u5176\u5de5\u4f5c\u539f\u7406\uff0c \u8bf7",(0,n.kt)("a",{parentName:"p",href:"https://agrd.io/download-kb-adblock"},"\u4e0b\u8f7d AdGuard \u5e94\u7528\u7a0b\u5e8f"),"\u3002")),(0,n.kt)("h2",{id:"\u95ee\u9898\u63cf\u8ff0"},"\u95ee\u9898\u63cf\u8ff0"),(0,n.kt)("p",null,"AdGuard \u9ed8\u8ba4\u4f7f\u7528\u300c\u9ed8\u8ba4\u8def\u7531\u300d\u529f\u80fd\uff0c\u7981\u7528 iCloud \u4e13\u7528\u4ee3\u7406\u7684\u539f\u56e0\u3002"),(0,n.kt)("p",null,"\u76ee\u524d\uff0cAdGuard \u548c iCloud \u4e13\u7528\u4ee3\u7406\u4e0d\u80fd\u540c\u65f6\u5de5\u4f5c\u3002 AdGuard \u65e0\u6cd5\u963b\u6b62\u5e7f\u544a\uff0c\u56e0\u4e3a iCloud \u4e13\u7528\u4ee3\u7406\u4f1a\u5728 AdGuard \u8fc7\u6ee4\u7f51\u7edc\u8fde\u63a5\u4e4b\u524d\u5bf9\u6d41\u91cf\u8fdb\u884c\u52a0\u5bc6\u3002 \u5f53 iCloud \u4e13\u7528\u4ee3\u7406\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u65f6\uff0c\u5e94\u7528\u5c31\u65e0\u6cd5\u8fdb\u884c\u8fc7\u6ee4\uff08\u5305\u62ec\u672c\u5730\u8fc7\u6ee4\uff09\u3002 \u56e0\u6b64\uff0cAdGuard \u65e0\u6cd5\u5728 Safari \u4e2d\u8fc7\u6ee4\u6d41\u91cf\u6216\u6267\u884c DNS \u8fc7\u6ee4\u3002 \u4f46\u662f\uff0cAdGuard \u4ecd\u7136\u4f1a\u8fc7\u6ee4\u5176\u4ed6\u6d4f\u89c8\u5668\u7684\u6d41\u91cf\u3002 \u8981\u7ee7\u7eed\u4f7f\u7528 iCloud \u4e13\u7528\u4ee3\u7406\uff0c\u8bf7\u8003\u8651\u5b89\u88c5 ",(0,n.kt)("a",{parentName:"p",href:"https://adguard.com/adguard-safari/overview.html"},"AdGuard Safari \u7248"),"\u3002"),(0,n.kt)("p",null,"\u5728 Mac \u4e0a\u4f7f\u7528\u4efb\u4f55 VPN \u5e94\u7528\u7a0b\u5e8f\u4e5f\u662f\u5982\u6b64\uff1a\u7528\u6237\u5fc5\u987b\u5728\u4f7f\u7528 iCloud \u4e13\u7528\u4ee3\u7406\u6216 VPN \u670d\u52a1\u4e4b\u95f4\u8fdb\u884c\u9009\u62e9\u3002"),(0,n.kt)("h2",{id:"\u66f4\u8be6\u7ec6\u7684\u8bf4\u660e"},"\u66f4\u8be6\u7ec6\u7684\u8bf4\u660e"),(0,n.kt)("p",null,"\u73b0\u5728 Mac \u7248 AdGuard \u4f7f\u7528\u57fa\u4e8e\u7f51\u7edc\u6269\u5c55 API \u7684 macOS \u5185\u7f6e\u7684 Socket \u8fc7\u6ee4\u3002 \u8fd9\u79cd\u65b0\u7684\u6f0f\u6d1e\u767e\u51fa\u7684\u673a\u5236\u53d6\u4ee3\u4e86\u8001\u5f0f\u7684\u5185\u6838\u6269\u5c55\u3002 \u5728\u8fc7\u53bb\u7684\u4e00\u5e74\u534a\u5185\uff0c\u6211\u4eec\u5411 Apple \u62a5\u544a\u4e86\u8d85\u8fc7 20 \u4e2a\uff08\uff01\uff09\u5173\u4e8e\u5176\u65b0\u8fc7\u6ee4\u65b9\u5f0f\u7684\u9519\u8bef\u3002"),(0,n.kt)("p",null,"\u7f51\u7edc\u6269\u5c55 API \u6709\u4e00\u4e2a\u7c7b\u4f3c VPN \u7684\u914d\u7f6e\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u4e2a\u7c7b\u4f3c\u8def\u7531\u7684\u6761\u76ee\u5217\u8868\u3002 \u5728 Big Sur \u4e0a\uff0cAdGuard \u5f00\u53d1\u4e86\u300c\u5206\u79bb\u96a7\u9053\u300d\u89c4\u5219\uff0c\u4ee5\u907f\u514d\u521b\u5efa\u300c\u9ed8\u8ba4\u8def\u7531\u300d\u89c4\u5219\uff0c\u56e0\u4e3a\u5b83\u4f1a\u7ed9 Big Sur \u65e9\u671f\u7248\u672c\u5e26\u6765\u95ee\u9898\u3002"),(0,n.kt)("p",null,"\u5728 Monterey \u4e0a\uff0c\u63a8\u51fa\u4e86 iCloud \u4e13\u7528\u4ee3\u7406\u3002 \u90ae\u4ef6\u5e94\u7528\u7a0b\u5e8f\u7684\u9690\u79c1\u529f\u80fd\u4e5f\u4f7f\u7528\u4e13\u7528\u4ee3\u7406\u670d\u52a1\u5668\u3002"),(0,n.kt)("p",null,"\u56e0\u6b64\uff0cAdGuard \u65e0\u6cd5\u4e0e iCloud \u4e13\u7528\u4ee3\u7406\u548c\u90ae\u4ef6\u5e94\u7528\u7a0b\u5e8f\u7684\u9690\u79c1\u529f\u80fd\u4e00\u8d77\u4f7f\u7528\uff1a"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"iCloud Private Relay is applied to connections at the library level \u2014 before they reach the socket level, where AdGuard operates."),(0,n.kt)("li",{parentName:"ol"},"iCloud Private Relay uses QUIC, which AdGuard can't filter in filtered apps because HTTP/3 filtering is not yet available."),(0,n.kt)("li",{parentName:"ol"},"Consequently, AdGuard blocks QUIC, including iCloud Private Relay traffic \u2014 otherwise, ad blocking is impossible."),(0,n.kt)("li",{parentName:"ol"},'When you use iCloud Private Relay and switch AdGuard into the "split-tunnel" mode, you can\'t open websites in Safari.'),(0,n.kt)("li",{parentName:"ol"},'To work around this issue for Monterey, we apply the "default route" rule. When Private Relay sees that rule, it disables itself automatically. So, AdGuard works seamlessly on Monterey, but iCloud Private Relay gets disabled.')),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"network.extension.monterey.force.split.tunnel"),' restores the "Big Sur" behavior, but this option may break access to websites due to (3) and (4). We keep searching for a solution to this issue. One of the options is implementing HTTP/3 filtering.'),(0,n.kt)("h2",{id:"recommended-solution"},"Recommended solution"),(0,n.kt)("p",null,"We recommend using AdGuard together with a more traditional VPN service such as ",(0,n.kt)("a",{parentName:"p",href:"https://adguard-vpn.com/"},"AdGuard VPN"),"."),(0,n.kt)("h2",{id:"alternative-solution"},"Alternative solution"),(0,n.kt)("p",null,'You can prevent AdGuard from using the "default route" by disabling the "default route". It can be done via Advanced Settings \u2192 ',(0,n.kt)("inlineCode",{parentName:"p"},"network.extension.monterey.force.split.tunnel"),"."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://cdn.adtidy.org/content/kb/ad_blocker/mac/mac_adguard_advanced_settings.jpg",alt:"Disable default route in advanced settings *border"})),(0,n.kt)("p",null,"Bear in mind that, in this case, you'll face the issues described above."))}m.isMDXComponent=!0}}]);